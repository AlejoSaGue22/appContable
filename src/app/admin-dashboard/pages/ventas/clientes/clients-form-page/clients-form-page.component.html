@if ( clienteIdResource.isLoading() ) {
    <div class="flex justify-center items-center h-screen">
            <app-loader/>  
    </div>
}


@if ( clienteIdResource.hasValue() ) {
    <header-title-page [titleHead]="headTitleCliente" />

    <div class="w-full">  
    <!-- Formulario -->
        <form [formGroup]="clientsForm" (ngSubmit)="onSubmit()" class="flex flex-col-2 gap-2">
        
                <div class="w-2/3 bg-white rounded-xl shadow-lg overflow-hidden mt-6">
                        
                        <div class="p-6">
                            <!-- Sección: Información básica -->
                            <div class="mb-8">
                                <h3 class="text-lg font-medium text-slate-700 border-b pb-2 mb-4 flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-500" width="24" height="24" viewBox="0 0 24 24">
                                        <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                                            <path stroke-dasharray="64" stroke-dashoffset="64" d="M12 3c4.97 0 9 4.03 9 9c0 4.97 -4.03 9 -9 9c-4.97 0 -9 -4.03 -9 -9c0 -4.97 4.03 -9 9 -9Z">
                                                <animate fill="freeze" attributeName="stroke-dashoffset" dur="0.6s" values="64;0"/>
                                            </path>
                                            <path stroke-dasharray="8" stroke-dashoffset="8" d="M12 7v6">
                                                <animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="8;0"/>
                                                <animate attributeName="stroke-width" begin="1.8s" dur="3s" keyTimes="0;0.1;0.2;0.3;1" repeatCount="indefinite" values="2;3;3;2;2"/>
                                            </path>
                                            <path stroke-dasharray="2" stroke-dashoffset="2" d="M12 17v0.01">
                                                <animate fill="freeze" attributeName="stroke-dashoffset" begin="0.8s" dur="0.2s" values="2;0"/>
                                                <animate attributeName="stroke-width" begin="2.1s" dur="3s" keyTimes="0;0.1;0.2;0.3;1" repeatCount="indefinite" values="2;3;3;2;2"/>
                                            </path>
                                        </g>
                                    </svg>
                                    Información Básica
                                </h3>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div class="relative">
                                            <label class="block mb-2 text-sm font-medium text-slate-600">
                                                Tipo <span class="text-red-500">*</span>
                                            </label>
                                            <select [class.border-red-500]="clientsForm.get('tipo')?.errors ?? false" 
                                                    class="w-full bg-white text-slate-700 text-sm border rounded-lg px-4 py-3 transition duration-300 ease focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm cursor-pointer" 
                                                    formControlName="tipoPersona">
                                            <option value="">Selecciona un tipo</option>
                                            <option value="PN">Persona Natural</option>
                                            <option value="PJ">Persona Jurídica</option>
                                            </select>
                                            
                                            <form-error-label [errorType]="clientsForm.get('tipo')!" />
                                        </div>

                                        <!-- Campos para Persona Natural -->
                                        @if (clientsForm.value.tipoPersona == 'PN') {
                                            <div>
                                            <label class="block mb-2 text-sm font-medium text-slate-600">
                                                Nombre <span class="text-red-500">*</span>
                                            </label>
                                            <input [class.border-red-500]="clientsForm.get('nombre')?.errors ?? false" 
                                                    class="w-full bg-white text-slate-700 text-sm border rounded-lg px-4 py-3 transition duration-300 ease focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm" 
                                                    placeholder="Ingrese el nombre" 
                                                    formControlName="nombre"/>
                                            <form-error-label [errorType]="clientsForm.get('nombre')!" />
                                            </div>
                                        
                                            <div>
                                            <label class="block mb-2 text-sm font-medium text-slate-600">
                                                Apellido <span class="text-red-500">*</span>
                                            </label>
                                            <input [class.border-red-500]="clientsForm.get('apellido')?.errors ?? false" 
                                                    class="w-full bg-white text-slate-700 text-sm border rounded-lg px-4 py-3 transition duration-300 ease focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm" 
                                                    placeholder="Ingrese el apellido" 
                                                    formControlName="apellido"/>
                                            <form-error-label [errorType]="clientsForm.get('apellido')!" />
                                            </div>
                                        }
                                        
                                        <!-- Campos para Persona Jurídica -->
                                        @if (clientsForm.value.tipoPersona == 'PJ') {
                                            <div class="md:col-span-2">
                                            <label class="block mb-2 text-sm font-medium text-slate-600">
                                                Razón Social <span class="text-red-500">*</span>
                                            </label>
                                            <input [class.border-red-500]="clientsForm.get('razonSocial')?.errors ?? false" 
                                                    class="w-full bg-white text-slate-700 text-sm border rounded-lg px-4 py-3 transition duration-300 ease focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm"
                                                    placeholder="Ingrese la razón social"
                                                    formControlName="razonSocial"/>
                                            <form-error-label [errorType]="clientsForm.get('razonSocial')!" />
                                            </div>
                                        }

                                        <div class="relative">
                                            <label class="block mb-2 text-sm font-medium text-slate-600">
                                            Tipo de Documento <span class="text-red-500">*</span>
                                            </label>
                                            <select [class.border-red-500]="clientsForm.get('tipoDocumento')?.errors ?? false" 
                                                    class="w-full bg-white text-slate-700 text-sm border rounded-lg px-4 py-3 transition duration-300 ease 
                                                        focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm cursor-pointer" 
                                                    formControlName="tipoDocumento">
                                            <option value="">Selecciona un documento</option>
                                            <option value="CC">Cédula de Ciudadanía</option>
                                            <option value="NIT">NIT</option>
                                            <option value="TI">Tarjeta de Identidad</option>
                                            <option value="PS">Pasaporte</option>
                                            <option value="PEP">Permiso Especial PEP</option>
                                            </select>
                                            
                                            <form-error-label [errorType]="clientsForm.get('tipoDocumento')!" />
                                        </div>
                                        
                                        <div>
                                            <label class="block mb-2 text-sm font-medium text-slate-600">
                                            Número de Documento <span class="text-red-500">*</span>
                                            </label>
                                            <input [class.border-red-500]="clientsForm.get('numeroDocumento')?.errors ?? false" 
                                                class="w-full bg-white text-slate-700 text-sm border rounded-lg px-4 py-3 transition duration-300 ease focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm" 
                                                placeholder="Ingrese el número" 
                                                formControlName="numeroDocumento"/>
                                            <form-error-label [errorType]="clientsForm.get('numeroDocumento')!" />
                                        </div>
                                </div>
                            </div>

                            <!-- Sección: Información de contacto -->
                            <div class="mb-8">
                                <h3 class="text-lg font-medium text-slate-700 border-b pb-2 mb-4 flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                                    </svg>
                                    Información de Contacto
                                </h3>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block mb-2 text-sm font-medium text-slate-600">
                                            Dirección
                                        </label>
                                        <input [class.border-red-500]="clientsForm.get('direccion')?.errors ?? false" 
                                            class="w-full bg-white text-slate-700 text-sm border rounded-lg px-4 py-3 transition duration-300 ease focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm" 
                                            placeholder="Ingrese la dirección completa"
                                            formControlName="direccion"/>
                                        <form-error-label [errorType]="clientsForm.get('direccion')!" />
                                    </div>

                                    <div>
                                        <label class="block mb-2 text-sm font-medium text-slate-600">
                                        Ciudad <span class="text-red-500">*</span>
                                        </label>
                                        <input [class.border-red-500]="clientsForm.get('ciudad')?.errors ?? false" 
                                            class="w-full bg-white text-slate-700 text-sm border rounded-lg px-4 py-3 transition duration-300 ease focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm" 
                                            placeholder="Ingrese la ciudad"
                                            formControlName="ciudad"/>
                                        <form-error-label [errorType]="clientsForm.get('ciudad')!" />
                                    </div>

                                    <div>
                                        <label class="block mb-2 text-sm font-medium text-slate-600">
                                        Teléfono <span class="text-red-500">*</span>
                                        </label>
                                        <input [class.border-red-500]="clientsForm.get('telefono')?.errors ?? false" 
                                            class="w-full bg-white text-slate-700 text-sm border rounded-lg px-4 py-3 transition duration-300 ease focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm" 
                                            type="number" 
                                            min="0"
                                            maxlength="10"
                                            placeholder="300 000 000"
                                            formControlName="telefono"/>
                                        <form-error-label [errorType]="clientsForm.get('telefono')!" />
                                    </div>

                                    <div>
                                        <label class="block mb-2 text-sm font-medium text-slate-600">
                                        Email <span class="text-red-500">*</span>
                                        </label>
                                        <input [class.border-red-500]="clientsForm.get('email')?.errors ?? false" 
                                            class="w-full bg-white text-slate-700 text-sm border rounded-lg px-4 py-3 transition duration-300 ease focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm" 
                                            type="email" 
                                            placeholder="micorreo@email.com"
                                            formControlName="email"/>
                                        <form-error-label [errorType]="clientsForm.get('email')!" />
                                    </div>

                                    <div>
                                        <label class="block mb-2 text-sm font-medium text-slate-600">
                                            Observacion
                                        </label>
                                        <textarea class="w-full bg-white text-slate-700 text-sm border rounded-lg px-4 py-3 
                                            transition duration-300 ease focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm"
                                            placeholder=""
                                            formControlName="observacion">
                                        </textarea>
                                        
                                        <form-error-label [errorType]="clientsForm.get('email')!" />
                                    </div>
                                </div>
                            </div>


                        </div>
                        
                </div>

                <div class="w-2/4 bg-white rounded-xl shadow-lg overflow-hidden mt-6">
                            <div class="p-6">
                                <!-- Sección: Información tributaria -->
                                <div class="mb-8">
                                    <h3 class="text-lg font-medium text-slate-700 border-b pb-2 mb-4 flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2z" />
                                    </svg>
                                    Información Tributaria
                                    </h3>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div class="relative">
                                            <label class="block mb-2 text-sm font-medium text-slate-600">
                                                Responsabilidades fiscales <span class="text-red-500">*</span>
                                            </label>
                                            <select [class.border-red-500]="clientsForm.get('responsableFiscal')?.errors ?? false" 
                                                    class="w-full bg-white text-slate-700 text-sm border rounded-lg px-4 py-3 transition duration-300 ease 
                                                    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm cursor-pointer" 
                                                    formControlName="responsableFiscal">
                                                <option value="" disabled>Selecciona una condición</option>
                                                <option value="GC">Gran contribuyente</option>
                                                <option value="AU">Autorretenedor</option>
                                                <option value="AR">Agente de retencion IVA</option>
                                                <option value="RT">Regimen simple de tribuacion</option>
                                                <option value="N">No aplica - Otros</option>
                                            </select>
                                        
                                            <form-error-label [errorType]="clientsForm.get('responsableFiscal')!" />
                                        </div>
                                    </div>
                                </div>

                                <!-- Botones de acción -->
                                <div class="flex justify-end space-x-4 pt-4 border-t border-slate-200">
                                    <button type="button"
                                            (click)="onCancel()"
                                            class="px-6 py-2.5 text-sm font-medium text-slate-700 bg-white border border-slate-300 
                                            rounded-lg shadow-sm hover:bg-slate-50 transition-colors duration-300 cursor-pointer">
                                        Cancelar
                                    </button>
                                    <button type="submit"
                                            class="px-6 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-lg shadow-sm
                                            hover:bg-blue-700 transition-colors duration-300 cursor-pointer"
                                            >
                                        Guardar Cliente
                                    </button>
                                </div>
                            </div>
                </div>
            
        </form>

    </div>
}


@if ( clienteIdResource.error() ) {
    <app-error-page />
}